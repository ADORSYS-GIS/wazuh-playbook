# ‚úÖ Deploy to Production Request

develop
## üìå Summary

Deploying a patched version of the `wazuh-helm`, which includes:

- Upgrade to Wazuh v4.13.1.
- Addition of custom FIM rules for Linux and macOS endpoints.
- Integration of AWS services with Wazuh Manager.
- Support for deploying the Helm chart on GKE.
=======

## üìå Summary

Deploy Wazuh security platform updates including version upgrade, FIM enhancements, and AWS integration to improve security monitoring capabilities.
 main

---

## üì¶ Change Description

 develop
- **Feature(s) / Fix(es):**
  - [https://github.com/ADORSYS-GIS/wazuh-helm/issues/102] Upgrade Wazuh to v4.13.1
  - [https://github.com/ADORSYS-GIS/wazuh/issues/252] Add custom FIM rules for Linux
  - [https://github.com/ADORSYS-GIS/wazuh/issues/243] Add custom FIM rules for macOS
  - [https://github.com/ADORSYS-GIS/wazuh/issues/174] Integrate AWS services into Wazuh Manager
  - Enable Helm chart deployment on GKE

=======
- Feature(s) / Fix(es):
  

- Related Commits / Merge Requests:
 main
---

## üóÇÔ∏è Environment

develop
- **Target Environment:** Prod and Dev clusters
- **Affected Services:** 
  - Wazuh Manager
  - Wazuh Indexer
  - Wazuh Dashboard

- **Environment URLs:**
  - [Dev Wazuh Cluster](https://dev.wazuh.adorsys.team)
  - [Prod Wazuh Cluster](https://wazuh.adorsys.team)

## Checklist
- [ ] Code reviewed and approved
- [ ] Infrastructure changes tested on `Dev Wazuh Cluster`
- [ ] Downtime expected? **Yes, approximately 8‚Äì17 minutes**, due to download of new container images

**Remark:** We should add the update of the bash of macOS machines in our `setup-agent` workflow.
=======
- **Target Environment:** Production
- **Affected Services:** 
  - Wazuh Manager

  - Wazuh Agents (Linux, MacOS endpoints)

  - AWS CloudTrail Integration

- **Environment URLs:**
  - [Dev Wazuh Cluster](https://dev.wazuh.adorsys.team/)
  - [Prod Wazuh Cluster](https://wazuh.adorsys.team/)

---

## üß™ Pre-Deployment Checklist

- [ ] Code reviewed and approved by security team

- [ ] FIM rules tested on staging Linux and MacOS endpoints

- [ ] Wazuh 4.13.1 compatibility verified with existing agents

- [ ] AWS integration tested with CloudTrail and S3 buckets

- [ ] Performance impact assessed (CPU, memory, storage)

- [ ] Backup of current Wazuh configuration and database

- [ ] Cost impact validated (AWS service usage, storage costs)

- [ ] Downtime expected? Minimal (rolling upgrade) - stakeholders informed

main

---

## üìÖ Deployment Plan

develop
1. Backup the production cluster
2. Create production release of `wazuh-helm` repo with all listed changes
3. Trigger CI/CD deployment pipeline by updating the `targetVersion` of Wazuh in **ArgoCD** configurations in the `main` branch of the `wazuh` repo
4. Validate the health of the cluster
5. Perform functional tests on the cluster

=======
**Phase 1:** Preparation 

   - Backup current Wazuh configuration and database

   - Notify security team and stakeholders of impending deployment

   - Verify all agents are communicating properly

**Phase 2:** Wazuh Version Upgrade 

   - Trigger CI/CD pipeline for Wazuh 4.13.1 upgrade

   - Apply infrastructure changes via Terraform

   - Deploy updated Wazuh manager containers

   - Verify manager service health

**Phase 3:** FIM Rules Deployment 

   - Deploy Linux FIM custom rules to production endpoints

   - Deploy MacOS FIM custom rules to production endpoints

   - Validate FIM rules are active and monitoring

   - Test FIM functionality with sample file changes

**Phase 4:** AWS Integration 

   - Configure AWS CloudTrail integration

   - Set up S3 bucket monitoring

   - Enable AWS security monitoring modules

   - Verify AWS logs are being processed

**Phase 5:** Validation 

   - Perform comprehensive smoke test

   - Validate all agents are reporting correctly

   - Verify AWS integration is receiving logs

   - Confirm FIM alerts are generating appropriately
 main
---

## üßØ Rollback Plan (If Process Goes Astray)

develop
- Revert to last stable deployment
- Notify stakeholders
- Estimated rollback time: **4‚Äì10 minutes**
=======
- Revert to last stable deployment.
- Notify stakeholders
- Time estimate for rollback: **4-10 minutes**
 main

---

## üë• Stakeholders & Notifications

 develop
- **Dev Contact:** @ArmandMeppa  
- **Product Owner:** @yannicksiewe  
=======
- **Dev Contact:** @ArmandMeppa
- **Product Owner:** @yannicksiewe , @francis-pouatcha
main
- **Slack Channel Notification:** #wazuh-team

---

## üïê Deployment Window

develop
- **Scheduled Date & Time:** 2025-11-01 @ 02:00pm (UTC+1)
=======
- **Scheduled Date & Time:** 2025-09-01 @ 04:00pm (UTC+1)
main
- **Approved by:** **Project team**

---

## ‚úÖ Post-Deployment Validation
 develop
- [ ] Wazuh dashboard upgraded, accessible and functioning
- [ ] New FIM rules visible in dashboard
- [ ] AWS integration functioning as expected
- [ ] Confirmation sent to stakeholders
=======

- [ ] 
- [ ] Wazuh dashboard accessible and functioning

- [ ] All endpoints reporting to Wazuh manager (100% agent connectivity)

- [ ] FIM alerts generating for Linux and MacOS systems

- [ ] AWS CloudTrail logs being processed and alerts created

- [ ] System performance within acceptable thresholds

- [ ] Security dashboards show normal behavior and new data sources

- [ ] Documentation updated with new FIM rules and AWS integration details
main
