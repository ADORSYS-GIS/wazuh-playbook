# ‚úÖ Deploy to Production Request

## üìå Summary

Deploying a patched version of the `wazuh-helm`, which includes:

- Upgrade to Wazuh v4.13.1.
- Addition of custom FIM rules for Linux and macOS endpoints.
- Integration of AWS services with Wazuh Manager.
- Support for deploying the Helm chart on GKE.

---

## üì¶ Change Description

- **Feature(s) / Fix(es):**
  - [https://github.com/ADORSYS-GIS/wazuh-helm/issues/102] Upgrade Wazuh to v4.13.1
  - [https://github.com/ADORSYS-GIS/wazuh/issues/252] Add custom FIM rules for Linux
  - [https://github.com/ADORSYS-GIS/wazuh/issues/243] Add custom FIM rules for macOS
  - [https://github.com/ADORSYS-GIS/wazuh/issues/174] Integrate AWS services into Wazuh Manager
  - Enable Helm chart deployment on GKE

---

## üóÇÔ∏è Environment

- **Target Environment:** Prod and Dev clusters
- **Affected Services:** 
  - Wazuh Manager
  - Wazuh Indexer
  - Wazuh Dashboard

- **Environment URLs:**
  - [Dev Wazuh Cluster](https://dev.wazuh.adorsys.team)
  - [Prod Wazuh Cluster](https://wazuh.adorsys.team)

## Checklist
- [ ] Code reviewed and approved
- [ ] Infrastructure changes tested on `Dev Wazuh Cluster`
- [ ] Downtime expected? **Yes, approximately 8‚Äì17 minutes**, due to download of new container images

**Remark:** We should add the update of the bash of macOS machines in our `setup-agent` workflow.

---

## üìÖ Deployment Plan

1. Backup the production cluster
2. Create production release of `wazuh-helm` repo with all listed changes
3. Trigger CI/CD deployment pipeline by updating the `targetVersion` of Wazuh in **ArgoCD** configurations in the `main` branch of the `wazuh` repo
4. Validate the health of the cluster
5. Perform functional tests on the cluster

---

## üßØ Rollback Plan (If Process Goes Astray)

- Revert to last stable deployment
- Notify stakeholders
- Estimated rollback time: **4‚Äì10 minutes**

---

## üë• Stakeholders & Notifications

- **Dev Contact:** @ArmandMeppa  
- **Product Owner:** @yannicksiewe  
- **Slack Channel Notification:** #wazuh-team

---

## üïê Deployment Window

- **Scheduled Date & Time:** 2025-11-01 @ 02:00pm (UTC+1)
- **Approved by:** **Project team**

---

## ‚úÖ Post-Deployment Validation
- [ ] Wazuh dashboard upgraded, accessible and functioning
- [ ] New FIM rules visible in dashboard
- [ ] AWS integration functioning as expected
- [ ] Confirmation sent to stakeholders