## Create `/home` Partition

### Preliminary Backup Step

Before proceeding, ensure you have a recent backup of critical data:

```bash
sudo rsync -avh --progress /home/ /path/to/backup/home_backup_
```

Verify the backup completed successfully before moving on.

### Phase 1: Prepare the Environment (Live USB)

1. **Boot from Ubuntu Live USB (Try Ubuntu):**

   * You cannot modify partitions that are in use by the running OS.

2. **Open GParted:**

   * Launch **GParted** from the Live Ubuntu desktop.

---

### Phase 2: Partitioning with GParted (Partition for `/home`)

1. **Identify Your Existing Root Partition:**

   * Locate your Ubuntu root partition (e.g., `/dev/nvme0n1p5`).

2. **Shrink the Root Partition (if not already done):**

   * Right-click `/dev/nvme0n1p5` → **Resize/Move**.
   * Free up the desired space for `/home` (e.g., remaining space or \~250 GiB).
   * Click **Resize/Move**, then **Apply All Operations**.

3. **Create New Partition for **\`\`**:**

   * In the unallocated space:

     * Right-click **unallocated** → **New**.
     * Use **Maximum size (MiB)** (e.g., \~250 GB).
     * Set **File system** to `ext4`.
     * Set **Label** to `HOME`.
     * Click **Add**, then **Apply All Operations**.

> **Tip:** Allocate enough space for user data and future growth.

---

### Phase 3: Data Migration and `fstab` Configuration

1. **Identify the New **\`\`** Device and UUID:**

   * After creation, GParted will label it (e.g., `/dev/nvme0n1p10`).
   * Right-click → **Information** → copy the **UUID**.

2. **Mount Partitions in Live USB Terminal:**

   ```bash
   sudo mkdir /mnt/ubuntu_root
   sudo mount /dev/nvme0n1p5 /mnt/ubuntu_root         # Mount existing root
   sudo mkdir /mnt/new_home
   sudo mount /dev/nvme0n1p10 /mnt/new_home             # Mount new /home partition
   ```

3. **Copy **\`\`** Data:**

   ```bash
   sudo rsync -avh --progress /mnt/ubuntu_root/home/ /mnt/new_home/
   ```

   * **Verify** sizes:

     ```bash
     du -sh /mnt/ubuntu_root/home
     du -sh /mnt/new_home
     ```

4. **Rename Original **\`\`**:**

   ```bash
   sudo mv /mnt/ubuntu_root/home /mnt/ubuntu_root/home_old
   ```

   * Acts as a backup. After verifying, remove `/home_old`.

5. **Update **\`\`** of Installed System:**

   ```bash
   sudo nano /mnt/ubuntu_root/etc/fstab
   ```

   * Add an entry (replace `<UUID>` with the actual UUID or replace `UUID=<UUID>` with device name `/dev/nvme0n1pX`):

     ```
     UUID=<UUID>    /home    ext4    defaults,nosuid,nodev    0   2
     ```
   * Save (Ctrl+O) and exit (Ctrl+X).

6. **Unmount and Reboot:**

   ```bash
   sudo umount /mnt/new_home
   sudo umount /mnt/ubuntu_root
   sudo reboot
   ```

---

### Phase 4: Verification

1. After rebooting:

   ```bash
   df -h | grep "/home"
   ls -la /home
   ```

   * Ensure `/home` is mounted separately and your user data is present.

2. If successful, remove the backup:

   ```bash
   sudo rm -rf /home_old
   ```

Your `/home` directory is now on its own partition.
