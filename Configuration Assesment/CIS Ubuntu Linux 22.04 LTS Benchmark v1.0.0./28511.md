## Create `/var/log` Partition

### Preliminary Backup Step

Before proceeding, ensure you have a recent backup of critical data:

```bash
sudo rsync -avh --progress /var/log /path/to/backup/varlog_backup_
```

Verify the backup completed successfully before moving on.


### Phase 1: Prepare the Environment (Live USB)

1. **Boot from Ubuntu Live USB (Try Ubuntu):**

   * You cannot modify partitions that are in use by the running OS.

2. **Open GParted:**

   * Launch **GParted** from the Live Ubuntu desktop.

---

### Phase 2: Partitioning with GParted (Partition for `/var/log`)

1. **Identify Your Existing Root Partition:**

   * Locate your Ubuntu root (e.g., `/dev/nvme0n1p5`).

2. **Shrink the Root Partition (if not already done):**

   * Right-click `/dev/nvme0n1p5` → **Resize/Move**.
   * Free up at least **15 GiB** for `/var/log` (e.g., `15360 MiB`).
   * Click **Resize/Move**, then **Apply All Operations**.

3. **Create New Partition for `/var/log`:**

   * In the freed space:

     * Right-click **unallocated** → **New**.
     * Set **New size (MiB)** to `15360` (for 15 GiB).
     * Set **File system** to `ext4`.
     * Set **Label** to `VARLOG`.
     * Click **Add**, then **Apply All Operations**.

> **Tip:** Ensure journaling is enabled (default in ext4) so logs aren’t lost.

---

### Phase 3: Data Migration and `fstab` Configuration

1. **Identify the New `/var/log` Device and UUID:**

   * After creation, GParted will list it (e.g., `/dev/nvme0n1p8`).
   * Right-click → **Information** → copy the **UUID**.

2. **Mount Partitions in Live USB Terminal:**

   ```bash
   sudo mkdir /mnt/ubuntu_root
   sudo mount /dev/nvme0n1p5 /mnt/ubuntu_root         # Mount existing root
   sudo mkdir /mnt/new_varlog
   sudo mount /dev/nvme0n1p8 /mnt/new_varlog           # Mount new /var/log
   ```

3. **Copy `/var/log` Data:**

   ```bash
   sudo rsync -avh --progress /mnt/ubuntu_root/var/log/ /mnt/new_varlog/
   ```

   * **Verify** sizes:

     ```bash
     du -sh /mnt/ubuntu_root/var/log
     du -sh /mnt/new_varlog
     ```

4. **Rename Original `/var/log`:**

   ```bash
   sudo mv /mnt/ubuntu_root/var/log /mnt/ubuntu_root/var/log_old
   ```

   * Serves as a backup. After verifying, remove `/var/log_old`.

5. **Update `fstab` of Installed System:**

   ```bash
   sudo nano /mnt/ubuntu_root/etc/fstab
   ```

   * Add an entry (replace `<UUID>` with your actual UUID):

     ```
     UUID=<UUID>    /var/log    ext4    defaults,nosuid,nodev,noexec    0   2
     ```
   * Save (Ctrl+O) and exit (Ctrl+X).

6. **Unmount and Reboot:**

   ```bash
   sudo umount /mnt/new_varlog
   sudo umount /mnt/ubuntu_root
   sudo reboot
   ```

---

### Phase 4: Verification

1. After rebooting regularly:

   ```bash
   df -h | grep "/var/log"
   ls -ls /var/log
   ```

   * Ensure `/var/log` is mounted separately and contains your log files.

2. If successful, remove the backup:

   ```bash
   sudo rm -rf /var/log_old
   ```

Now your `/var/log` directory resides on its own partition.
